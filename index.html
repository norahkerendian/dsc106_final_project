<!DOCTYPE html>
<html lang="en" class="home">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Background and Motivation</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="features/features.css">
    <link rel="stylesheet" href="takeaways/conclusion.css">
    <link rel="stylesheet" href="background/background.css">
    <script src="https://d3js.org/d3.v7.min.js"></script> 
</head>
<body>
    <div id="content1"></div>
    <div id="content2"></div>
    <div id="content3"></div>
    <div id="content4"></div>
    <script>
        async function loadHTML(target, url, scriptPath) {
        const response = await fetch(url);
        const text = await response.text();
        const container = document.getElementById(target);
        container.innerHTML = text;

        // Ensure scripts execute only after injection
        setTimeout(() => {
            console.log(`Executing ${scriptPath}`);
            
            const script = document.createElement("script");
            script.src = scriptPath;
            script.defer = true;
            script.onload = () => console.log(`${scriptPath} loaded!`);
            document.body.appendChild(script);
        }, 100); // Small delay ensures DOM elements exist before running JS
    }

    document.addEventListener("DOMContentLoaded", () => {
        loadHTML("content1", "background/index.html", "background/background.js");
    });
    document.addEventListener("DOMContentLoaded", () => {
        loadHTML("content2", "features/features.html", "features/features.js");
    });

    document.addEventListener("DOMContentLoaded", () => {
        loadHTML("content3", "plots/index.html", "plots/plots.js");
    });

    document.addEventListener("DOMContentLoaded", () => {
        loadHTML("content4", "takeaways/takeaways.html", "takeaways/conclusion.js");
    });

        // loadHTML("content2", "features/features.html"), "features/features.js";
        // loadHTML("content3", "plots/index.html");
        // loadHTML("content4", "takeaways/takeaways.html");
    </script>
    <script src="global.js" type="module"></script>
</body>
</html>